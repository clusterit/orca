<link rel="import" href="../elements.html">

<polymer-element name="gateway-zone" layout vertical attributes="force2fa maxautologin loglevel hostkey forcecheck">
  <template>
    <link rel="stylesheet" href="gateway-element.css">

    <div class="settingscard" fit>
      <div center horizontal layout>
        <div class="label" flex>
          <div class="labeltext">Time based login</div>
          <div class="labelhelp">Should the gateway check if the user has activated her account
            to login. If this option is not set, the user is always allowed to login if a public key is available.
            Takes only effect when 2Factor Auth is not enabled!
          </div>
        </div>
        <paper-toggle-button class="widget" checked="{{forcecheck}}"></paper-toggle-button>
      </div>
      <div center horizontal layout>
        <div class="label" flex>
          <div class="labeltext">Force Two Factor Auth</div>
          <div class="labelhelp">Should the gateway enforce the use of two factor authentication. If the user has not setup
            2FA with a secret, she will not be able to login.
          </div>
        </div>
        <paper-toggle-button class="widget" checked="{{force2fa}}"></paper-toggle-button>
      </div>
      <div center horizontal layout>
        <div class="label" flex>
          <div class="labeltext">Max Autologin after 2FA</div>
          <div class="labelhelp">If the user authenticate correctly with her private key and an OTP, the user can
            configure a value so that the gateway does not check an OTP again. Specify here an upper limit if
            you don't want the user to configure too high values. A zero value forces the user to always
            do a two factor auth.
          </div>
        </div>
        <paper-input label="Autologin Max timeout" value="{{maxautologin}}"></paper-input>
      </div>
      <div center horizontal layout>
        <div class="label" flex>
          <div class="labeltext">Loglevel</div>
          <div class="labelhelp">Specify at which level the logging should be done. Trace is the most, Error is the least.</div>
        </div>
        <paper-dropdown-menu label="LogLevel"  class="widget">
          <paper-dropdown class="dropdown">
            <core-menu valueattr="val" class="menu" selected="{{loglevel}}">
              <paper-item val="TRACE">Trace</paper-item>
              <paper-item val="DEBUG">Debug</paper-item>
              <paper-item val="INFO">Info</paper-item>
              <paper-item val="WARN">Warn</paper-item>
              <paper-item val="ERROR">Error</paper-item>
            </core-menu>
          </paper-dropdown>
        </paper-dropdown-menu>
      </div>
      <div center horizontal layout>
        <div class="label" flex>
          <div class="labeltext">Hostkey</div>
          <div class="labelhelp">Copy&Paste your key to be used for the SSH server gateway.</div>
        </div>
      </div>
      <div flex class="hostkey">
        <paper-autogrow-textarea id="phostkey" style="width:100%" flex>
          <textarea  placeholder="Paste your host key for the SSH gateway" id="thostkey" value="{{hostkey}}"></textarea>
        </paper-autogrow-textarea>
      </div>
    </div>

  </template>
  <script>
    Polymer({
      hostkey : "",
      loglevel:"",

      ready : function () {
      },
      updateText : function (val) {
        this.$.thostkey.value = val;
        this.hostkey = val;
        this.$.phostkey.update(this.$.thostkey);
      }
    });
  </script>
</polymer-element>